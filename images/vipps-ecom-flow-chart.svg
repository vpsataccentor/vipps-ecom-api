<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="327px" preserveAspectRatio="none" style="width:1894px;height:327px;" version="1.1" viewBox="0 0 1894 327" width="1894.5px" zoomAndPan="magnify"><defs><filter height="300%" id="fj8nso17qvzd2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="3.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="6.0" dy="6.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="24" cy="252" fill="#000000" filter="url(#fj8nso17qvzd2)" rx="15" ry="15" style="stroke: none; stroke-width: 1.5;"/><rect fill="#F8F8F8" filter="url(#fj8nso17qvzd2)" height="75" rx="18.75" ry="18.75" style="stroke: #383838; stroke-width: 2.25;" width="97.5" x="130.5" y="214.5"/><line style="stroke: #383838; stroke-width: 2.25;" x1="130.5" x2="228" y1="253.9453" y2="253.9453"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacingAndGlyphs" textLength="67.5" x="145.5" y="241.4927">Initiate</text><rect fill="#F8F8F8" filter="url(#fj8nso17qvzd2)" height="75" rx="18.75" ry="18.75" style="stroke: #383838; stroke-width: 2.25;" width="115.5" x="516" y="142.5"/><line style="stroke: #383838; stroke-width: 2.25;" x1="516" x2="631.5" y1="181.9453" y2="181.9453"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacingAndGlyphs" textLength="85.5" x="531" y="169.4927">Reserve</text><rect fill="#F8F8F8" filter="url(#fj8nso17qvzd2)" height="75" rx="18.75" ry="18.75" style="stroke: #383838; stroke-width: 2.25;" width="112.5" x="1278" y="85.5"/><line style="stroke: #383838; stroke-width: 2.25;" x1="1278" x2="1390.5" y1="124.9453" y2="124.9453"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacingAndGlyphs" textLength="82.5" x="1293" y="112.4927">Capture</text><rect fill="#F8F8F8" filter="url(#fj8nso17qvzd2)" height="75" rx="18.75" ry="18.75" style="stroke: #383838; stroke-width: 2.25;" width="100.5" x="1284" y="235.5"/><line style="stroke: #383838; stroke-width: 2.25;" x1="1284" x2="1384.5" y1="274.9453" y2="274.9453"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacingAndGlyphs" textLength="70.5" x="1299" y="262.4927">Cancel</text><rect fill="#F8F8F8" filter="url(#fj8nso17qvzd2)" height="75" rx="18.75" ry="18.75" style="stroke: #383838; stroke-width: 2.25;" width="105" x="1651.5" y="12"/><line style="stroke: #383838; stroke-width: 2.25;" x1="1651.5" x2="1756.5" y1="51.4453" y2="51.4453"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacingAndGlyphs" textLength="75" x="1666.5" y="38.9927">Refund</text><ellipse cx="1863" cy="166.5" fill="none" filter="url(#fj8nso17qvzd2)" rx="15" ry="15" style="stroke: #000000; stroke-width: 1.5;"/><ellipse cx="1863.75" cy="167.25" fill="#000000" rx="9" ry="9" style="stroke: none; stroke-width: 1.5;"/><!--MD5=[0607403a389b03af381aa9aa6fc54084]
link *start to Initiate--><path d="M39.4536,252 C58.7445,252 92.8194,252 122.4972,252 " fill="none" id="*start-&gt;Initiate" style="stroke: #383838; stroke-width: 1.5;"/><polygon fill="#383838" points="130.3344,252,116.8344,246,122.8344,252,116.8344,258,130.3344,252" style="stroke: #383838; stroke-width: 1.5;"/><!--MD5=[45d762db0230588043656f12e52eac1b]
link Initiate to Reserve--><path d="M228.0191,243.0992 C298.5159,230.2329 429.0728,206.4049 508.0119,191.9978 " fill="none" id="Initiate-&gt;Reserve" style="stroke: #383838; stroke-width: 1.5;"/><polygon fill="#383838" points="515.4863,190.6337,501.1284,187.155,508.1081,191.9802,503.2829,198.96,515.4863,190.6337" style="stroke: #383838; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="133.5" x="274.5" y="207.1003">User confirms</text><!--MD5=[c0e5996c73b1f225e49bbd930519acd4]
link Reserve to Capture--><path d="M631.5353,175.6689 C770.8145,165.23 1124.2794,138.7374 1269.9695,127.8178 " fill="none" id="Reserve-&gt;Capture" style="stroke: #383838; stroke-width: 1.5;"/><polygon fill="#383838" points="1277.5878,127.2468,1263.677,122.273,1270.1088,127.8076,1264.5742,134.2394,1277.5878,127.2468" style="stroke: #383838; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="180" x="895.5" y="126.1003">Merchant captures</text><!--MD5=[d59c425eeef850fe1f05e18d82f9a134]
link Reserve to Cancel--><path d="M631.817,189.6134 C663.21,194.6595 702.6779,200.7608 738,205.5 C934.7316,231.8957 1168.9116,256.3917 1275.8151,267.1938 " fill="none" id="Reserve-&gt;Cancel" style="stroke: #383838; stroke-width: 1.5;"/><polygon fill="#383838" points="1283.9082,268.01,1271.0784,260.6856,1276.4461,267.2574,1269.8743,272.625,1283.9082,268.01" style="stroke: #383838; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="492" x="739.5" y="199.6003">Merchant cancels (potentially on behalf of the user)</text><!--MD5=[e32f0bf20d087f16420fa26ea15ca6ae]
link Capture to Refund--><path d="M1390.8096,111.7569 C1459.1256,98.1768 1573.5689,75.4275 1643.573,61.5119 " fill="none" id="Capture-&gt;Refund" style="stroke: #383838; stroke-width: 1.5;"/><polygon fill="#383838" points="1651.0439,60.0268,1636.6331,56.7741,1643.6878,61.4891,1638.9728,68.5438,1651.0439,60.0268" style="stroke: #383838; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="168" x="1437" y="64.6003">Merchant refunds</text><!--MD5=[d1e6696b7eb2d15696aed1df935b8243]
link Capture to *end--><path d="M1390.8356,127.6553 C1505.7351,137.108 1762.0915,158.1983 1840.0632,164.613 " fill="none" id="Capture-&gt;*end" style="stroke: #383838; stroke-width: 1.5;"/><polygon fill="#383838" points="1847.8604,165.2544,1834.8978,158.1676,1840.3856,164.6394,1833.9138,170.1272,1847.8604,165.2544" style="stroke: #383838; stroke-width: 1.5;"/><!--MD5=[fe62373ca50d8b63990cd07c55700c74]
link Cancel to *end--><path d="M1384.9488,262.7883 C1496.903,240.2387 1761.5487,186.9342 1840.4306,171.0459 " fill="none" id="Cancel-&gt;*end" style="stroke: #383838; stroke-width: 1.5;"/><polygon fill="#383838" points="1847.8868,169.5441,1833.4677,166.3283,1840.5345,171.0252,1835.8375,178.092,1847.8868,169.5441" style="stroke: #383838; stroke-width: 1.5;"/><!--MD5=[7d61ac6ed2e47c22eaef241e18c70f7f]
link Refund to *end--><path d="M1755.1838,87.1635 C1785.789,109.6843 1822.8344,136.9441 1844.5699,152.9382 " fill="none" id="Refund-&gt;*end" style="stroke: #383838; stroke-width: 1.5;"/><polygon fill="#383838" points="1850.7999,157.5225,1843.4827,144.6886,1844.7592,153.0773,1836.3704,154.3538,1850.7999,157.5225" style="stroke: #383838; stroke-width: 1.5;"/><!--MD5=[cf7dc43fc96f7b82566e5517be9413ba]
link Initiate to Cancel--><path d="M228.437,255.7632 C283.4739,259.7841 375.3132,265.926 454.5,268.5 C763.8851,278.5569 1134.7869,275.5105 1275.897,273.8049 " fill="none" id="Initiate-&gt;Cancel" style="stroke: #383838; stroke-width: 1.5;"/><polygon fill="#383838" points="1283.6519,273.7097,1270.0792,267.876,1276.1524,273.8018,1270.2266,279.8751,1283.6519,273.7097" style="stroke: #383838; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="235.5" x="456" y="262.6003">User cancels, or timeout</text><!--MD5=[7fcf72dc49625fafd5e9a41a0ff4496d]
@startuml
skinparam monochrome true

scale 1.5
left to right direction

[*] - -> Initiate
Initiate - -> Reserve: User confirms
Reserve - -> Capture: Merchant captures
Reserve - -> Cancel: Merchant cancels (potentially on behalf of the user)
Capture - -> Refund: Merchant refunds
Capture - -> [*]
Cancel - -> [*]
Refund - -> [*]
Initiate - -> Cancel: User cancels, or timeout
@enduml

PlantUML version 1.2019.11(Sun Sep 22 10:02:15 UTC 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_222-heroku-b10
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>